app-id: me.ariyadey.capturist
runtime: org.gnome.Platform
runtime-version: "47"
sdk: org.gnome.Sdk
command: capturist
finish-args:
  - --share=ipc
  - --socket=fallback-x11
  - --socket=wayland
  - --device=dri
  - --share=network
  - --talk-name=org.freedesktop.Notifications
  - --talk-name=org.kde.StatusNotifierWatcher
  - --talk-name=org.freedesktop.secrets
modules:
  - name: capturist
    buildsystem: simple
    build-commands:
      - ar x capturist.deb
      - tar xf data.tar.xz
      - cp -r usr/* /app/
      - install -D -m 644 /app/share/icons/hicolor/128x128/apps/capturist.png /app/share/icons/hicolor/128x128/apps/me.ariyadey.capturist.png
      - install -D -m 644 /app/share/applications/Capturist.desktop /app/share/applications/me.ariyadey.capturist.desktop
      # Fix desktop file to match app-id
      - sed -i 's/Icon=capturist/Icon=me.ariyadey.capturist/' /app/share/applications/me.ariyadey.capturist.desktop
    sources:
      - type: file
        path: capturist.deb
