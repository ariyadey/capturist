<form (ngSubmit)="onSubmit()" [class.is-adding]="isAdding()" [formGroup]="form" class="w-[560px]">
  <mat-dialog-content>
    <div class="flex flex-col">
      <mat-form-field class="task-name-field" subscriptSizing="dynamic">
        <textarea
          #taskNameTextArea
          (keydown.control.enter)="onSubmit()"
          (keydown.enter)="$event.preventDefault(); onSubmit()"
          [formControl]="form.controls.name"
          cdkAutosizeMaxRows="5"
          cdkAutosizeMinRows="1"
          cdkTextareaAutosize
          matInput
          maxlength="500"
          placeholder="Task name"
        ></textarea>
        <mat-icon
          matSuffix
          matTooltip="
            Due date (e.g., 'today', 'every week', 'tom at 2pm)
            #Project
            @Label
            +Assignee
            p1, p2, p3, p4 for priority
            {Deadline} (e.g., {in 3 days})
            // Description
          "
          svgIcon="info"
        />
      </mat-form-field>
      <mat-form-field class="task-description-field" subscriptSizing="dynamic">
        <textarea
          (keydown.control.enter)="onSubmit()"
          [formControl]="form.controls.description"
          cdkAutosizeMaxRows="8"
          cdkAutosizeMinRows="1"
          cdkTextareaAutosize
          matInput
          maxlength="16383"
          placeholder="Description"
        ></textarea>
      </mat-form-field>
    </div>
  </mat-dialog-content>
  <mat-divider />
  <mat-dialog-actions>
    <div>
      <mat-icon [matTooltip]="shortcutTooltipText()" svgIcon="keyboard" />
    </div>
    <div>
      <button matButton="text" matDialogClose>Cancel</button>
      <button
        [class.cursor-not-allowed]="form.invalid || isAdding()"
        [disabled]="form.invalid || isAdding()"
        matButton="filled"
        type="submit"
      >
        @if (isAdding()) {
          <mat-spinner [diameter]="20" />
        } @else {
          Add task
        }
      </button>
    </div>
  </mat-dialog-actions>
</form>
